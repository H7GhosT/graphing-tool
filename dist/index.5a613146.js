const grapher=document.querySelector("#grapher"),width=720,height=500;grapher.style.setProperty("--height",500),grapher.style.setProperty("--width",720);const canvas=document.querySelector("#graph-canvas"),ctx=canvas.getContext("2d");function getCenterViewPos(){const t={left:-10,right:10,get bottom(){return this.top-500*(this.right-this.left)/720}};return t.top=-(t.right-t.left)/720*500/2,t}ctx.canvas.width=720,ctx.canvas.height=500;let viewPos=getCenterViewPos(),center={get x(){return-720*viewPos.left/unitsOnWidth()},get y(){return 500- -720*viewPos.top/unitsOnWidth()}};function unitsOnWidth(){return viewPos.right-viewPos.left}function getUnitSpace(){let t=100*unitsOnWidth()/720,e=1;for(;t>10;)e*=10,t/=10;for(;t<1;)e/=10,t*=10;const n=[[1.75,1],[3.75,2.5],[7.5,5],[11,10]];for(let e=0;e<n.length;e++)if(t<n[e][0]){t=n[e][1];break}return t*=e,t}function getGridSpace(){let t=getUnitSpace();return t=t/unitsOnWidth()*720,t}function drawGrid(){ctx.fillStyle="#102024",ctx.fillRect(0,0,720,500),ctx.strokeStyle="#f0f0f0",ctx.lineWidth=2,ctx.beginPath(),ctx.moveTo(center.x,0),ctx.lineTo(center.x,500),ctx.stroke(),ctx.beginPath(),ctx.moveTo(0,500-center.y),ctx.lineTo(720,500-center.y),ctx.stroke(),ctx.fillStyle="#f0f0f0",ctx.beginPath(),ctx.arc(center.x,500-center.y,4,0,2*Math.PI),ctx.fill(),ctx.strokeStyle="#f0f0f020";let t=getGridSpace();for(const[e,n]of[[t,3],[t/5,1]]){ctx.lineWidth=n;for(let t=center.x-e*Math.floor(center.x/e);t<720;t+=e)ctx.beginPath(),ctx.moveTo(t,0),ctx.lineTo(t,500),ctx.stroke();for(let t=500-(center.y-e*Math.floor(center.y/e));t>0;t-=e)ctx.beginPath(),ctx.moveTo(0,t),ctx.lineTo(720,t),ctx.stroke()}}function drawGraph(t){ctx.strokeStyle=t.color,ctx.lineWidth=2,ctx.beginPath(),ctx.moveTo(0,getCY(t.f,0));for(let e=1;e<=720;e++)ctx.lineTo(e,getCY(t.f,e));ctx.stroke()}function drawLabels(){let t=getGridSpace(),e=getUnitSpace();ctx.fillStyle="#f0f0f0",ctx.textBaseline="top",ctx.textAlign="center",ctx.font="oblique bold 13px monospace",ctx.shadowColor="#102024",ctx.shadowBlur=15;const n=Math.floor(center.x/t);for(let o=center.x-t*n,r=-n*e;o<720;o+=t,r+=e)Math.abs(r)>=Number.EPSILON&&ctx.fillText(r.toPrecision(3),o,500-center.y+5);ctx.textBaseline="middle",ctx.textAlign="left";const o=Math.floor(center.y/t);for(let n=500-(center.y-t*Math.floor(center.y/t)),r=-o*e;n>0;n-=t,r+=e)Math.abs(r)>=Number.EPSILON&&ctx.fillText(r.toPrecision(3),center.x+5,n)}let Graph={functions:[{name:"f(x)",f:t=>10*Math.tan(t/15),color:"#ff4040"},{name:"g(x)",f:t=>10*Math.cos(t/15),color:"#40ff40"},{name:"l(x)",f:t=>10*Math.cos(t/5),color:"#4040ff"}]};function draw(){drawGrid();for(let t=0;t<Graph.functions.length;t++)drawGraph(Graph.functions[t]);drawLabels()}function getCY(t,e){return 500-(720*t((e-center.x)*unitsOnWidth()/720)/unitsOnWidth()+center.y)}draw();const hcanvas=document.querySelector("#hover-canvas"),hctx=hcanvas.getContext("2d");function getHMouse(t){const e=hcanvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}function createElement(t){t=t.trim();const e=document.createElement("template");return e.innerHTML=t,e.content.firstChild}hctx.canvas.width=720,hctx.canvas.height=500;const pinfo=grapher.querySelector(".pos-info"),dragState={prevMouse:{x:0,y:0},isDown:!1};function hoverListener(t){const e=getHMouse(t);hctx.clearRect(0,0,720,500),hctx.strokeStyle="#ffffff55",hctx.lineWidth=2,hctx.setLineDash([6]),hctx.beginPath(),hctx.moveTo(e.x,0),hctx.lineTo(e.x,500),hctx.stroke(),hctx.setLineDash([]),hctx.strokeStyle="#ffffff",hctx.beginPath(),hctx.moveTo(e.x,500-(center.y-4)),hctx.lineTo(e.x,500-(center.y+4)),hctx.stroke();for(let t=0;t<Graph.functions.length;t++)hctx.fillStyle=Graph.functions[t].color,hctx.beginPath(),hctx.arc(e.x,getCY(Graph.functions[t].f,e.x),5,0,2*Math.PI),hctx.fill();const n=pinfo.getBoundingClientRect();e.y-n.height-5<0?(pinfo.style.removeProperty("bottom"),pinfo.style.top=e.y+5+"px"):(pinfo.style.removeProperty("top"),pinfo.style.bottom=500-e.y+5+"px"),e.x+n.width+5>720?(pinfo.style.removeProperty("left"),pinfo.style.right=720-e.x+5+"px"):(pinfo.style.removeProperty("right"),pinfo.style.left=e.x+5+"px"),pinfo.innerHTML="";const o=(e.x-center.x)*unitsOnWidth()/720;pinfo.appendChild(createElement(`<div class="pos-info__row">\n         <span class="pos-info__left" style="">x:</span>\n         ${o.toPrecision(10)}\n       </div>`));for(let t=0;t<Graph.functions.length;t++)pinfo.appendChild(createElement(`\n       <div class="pos-info__row">\n         <span class="pos-info__left" style="color: ${Graph.functions[t].color}">${Graph.functions[t].name}:</span>${Graph.functions[t].f(o).toPrecision(10)}\n       </div>`))}hcanvas.addEventListener("mousemove",hoverListener),hcanvas.addEventListener("mouseenter",(t=>{pinfo.style.opacity=1})),hcanvas.addEventListener("mouseleave",(t=>{hctx.clearRect(0,0,720,500),pinfo.style.opacity=0})),hcanvas.addEventListener("mousedown",(t=>{dragState.prevMouse=getHMouse(t),dragState.isDown=!0})),document.addEventListener("mouseup",(t=>{dragState.isDown=!1})),document.addEventListener("mousemove",(t=>{if(!dragState.isDown)return;const e=getHMouse(t),n=(dragState.prevMouse.x-e.x)/720*unitsOnWidth(),o=(dragState.prevMouse.y-e.y)/720*unitsOnWidth();viewPos.left=viewPos.left+n,viewPos.right=viewPos.right+n,viewPos.top=viewPos.top+o,dragState.prevMouse=e,ctx.clearRect(0,0,720,500),draw()})),hcanvas.addEventListener("wheel",(t=>{let e=1.2;t.deltaY<0&&(e=1/e),e-=1;const n=viewPos.right-viewPos.left;viewPos.left-=n*e/2,viewPos.right+=n*e/2;const o=500*n/720;viewPos.top-=o*e/2,ctx.clearRect(0,0,720,500),draw(),hoverListener(t)}));
//# sourceMappingURL=index.5a613146.js.map
